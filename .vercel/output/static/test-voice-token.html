<!DOCTYPE html><html><head><title>Voice Token Test</title></head><body><h1>Voice Agent Token Test</h1><button id=testToken>Test Token Endpoint</button> <button id=testVoiceAgent>Test Voice Agent Connection</button><pre id=output></pre><script>const output=document.getElementById("output");function log(t,e){output.textContent+=`${(new Date).toISOString()} - ${t}\n`,e&&(output.textContent+=JSON.stringify(e,null,2)+"\n\n")}document.getElementById("testToken").addEventListener("click",(async()=>{log("Testing token endpoint...");try{const t=await fetch("http://localhost:4321/api/voice-agent/token",{method:"POST",headers:{"Content-Type":"application/json",Origin:window.location.origin},body:JSON.stringify({session_id:"test-"+Date.now()})});log("Token response:",await t.json())}catch(t){log("Token error:",{error:t.message,stack:t.stack})}})),document.getElementById("testVoiceAgent").addEventListener("click",(async()=>{log("Testing voice agent connection...");try{const{createWebRTCVoiceAgent:t}=await import("/src/lib/voice-agent/webrtc/main.ts"),e=t({apiEndpoint:"http://localhost:4321/api/voice-agent",maxReconnectAttempts:1});e.on("connectionStateChanged",(t=>{log("Connection state:",t)})),e.on("error",(t=>{log("Voice agent error:",t)})),await e.initialize(),log("Voice agent initialized successfully!"),setTimeout((()=>{e.disconnect(),log("Voice agent disconnected")}),5e3)}catch(t){log("Voice agent initialization error:",{error:t.message,stack:t.stack})}}))</script></body></html>