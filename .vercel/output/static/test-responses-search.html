<!DOCTYPE html><html><head><title>OpenAI Responses API Search Test</title><style>body{font-family:Arial,sans-serif;max-width:900px;margin:50px auto;padding:20px;background:#f5f5f5}.test-section{margin:20px 0;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)}button{padding:10px 20px;margin:5px;cursor:pointer;background:#4caf50;color:#fff;border:none;border-radius:4px}button:hover{background:#45a049}#results{margin-top:20px;padding:20px;background:#fff;border-radius:8px;min-height:150px;white-space:pre-wrap;font-family:'Courier New',monospace;font-size:14px;border:1px solid #ddd}.success{color:green;font-weight:700}.error{color:red;font-weight:700}.loading{color:#666;font-style:italic}input{width:400px;padding:10px;font-size:16px;border:1px solid #ddd;border-radius:4px}h1{color:#333}h2{color:#666;margin-bottom:15px}.method-selector{margin:10px 0}.method-selector label{margin-right:20px}</style></head><body><h1>üîç OpenAI Responses API - Web Search Test</h1><p>This tests the <code>/api/voice-agent/responses-search</code> endpoint that uses OpenAI's Responses API with the built-in <code>web_search_preview</code> tool.</p><div class=test-section><h2>Pre-configured Test Queries</h2><button onclick="testSearch(&#34;What are the latest AI tools for coffee shops in 2025?&#34;)">AI tools for coffee shops</button> <button onclick="testSearch(&#34;How are competitors using AI in Tulsa, Oklahoma?&#34;)">Competitors in Tulsa</button> <button onclick="testSearch(&#34;ChatGPT for customer service best practices&#34;)">ChatGPT customer service</button> <button onclick="testSearch(&#34;Current weather in New York City&#34;)">Weather in NYC</button></div><div class=test-section><h2>Custom Search Query</h2><input type=text value="Tesla stock price today" id=customQuery placeholder="Enter your search query..."> <button onclick=testCustomSearch()>Search</button><div class=method-selector><label><input type=radio value=POST name=method checked=checked> POST</label> <label><input type=radio value=GET name=method> GET</label></div></div><div class=test-section><h2>Results:</h2><div id=results>Ready to test...</div></div><script>async function testSearch(n){const e=document.getElementById("results"),s=document.querySelector('input[name="method"]:checked').value;e.innerHTML=`<span class="loading">üîÑ Searching for: "${n}" using ${s} method...</span>`;const t=Date.now();try{let r;if("POST"===s)r=await fetch("/api/voice-agent/responses-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,conversationContext:"Testing web search functionality"})});else{const e=new URLSearchParams({query:n,conversationContext:"Testing web search functionality"});r=await fetch(`/api/voice-agent/responses-search?${e}`,{method:"GET"})}const o=Date.now()-t,a=await r.json();r.ok&&a.success?(e.innerHTML=`<span class="success">‚úÖ Search successful! (${o}ms)</span>\n\n`,e.innerHTML+=`<strong>Query:</strong> ${n}\n\n`,a.response&&(e.innerHTML+=`<strong>AI Response:</strong>\n${a.response}\n\n`),a.searchResults&&a.searchResults.length>0&&(e.innerHTML+="<strong>Search Results:</strong>\n",a.searchResults.forEach(((n,s)=>{e.innerHTML+=`${s+1}. ${n.title}\n   ${n.snippet}\n   ${n.url}\n\n`}))),a.citations&&a.citations.length>0&&(e.innerHTML+="<strong>Citations:</strong>\n",a.citations.forEach(((n,s)=>{e.innerHTML+=`[${s+1}] ${n.title} - ${n.url}\n`}))),e.innerHTML+=`\n<strong>Raw Response:</strong>\n${JSON.stringify(a,null,2)}`):(e.innerHTML=`<span class="error">‚ùå Search failed! (${o}ms)</span>\n\n`,e.innerHTML+=`<strong>Error:</strong> ${a.error||"Unknown error"}\n`,a.response&&(e.innerHTML+=`<strong>Fallback Response:</strong> ${a.response}\n`),e.innerHTML+=`\n<strong>Raw Response:</strong>\n${JSON.stringify(a,null,2)}`)}catch(n){e.innerHTML='<span class="error">‚ùå Request failed!</span>\n\n',e.innerHTML+=`<strong>Error:</strong> ${n.message}\n`,e.innerHTML+=`\n<strong>Details:</strong>\n${n.stack}`}}function testCustomSearch(){const n=document.getElementById("customQuery").value;n&&testSearch(n)}document.getElementById("customQuery").addEventListener("keypress",(function(n){"Enter"===n.key&&testCustomSearch()})),window.addEventListener("load",(()=>{console.log("Test page loaded. Ready to test OpenAI Responses API search.")}))</script></body></html>