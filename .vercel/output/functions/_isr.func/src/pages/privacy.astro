---
import Layout from '../layouts/Layout.astro';
import AnimatedSection from '../components/AnimatedSection.astro';
import Icon from '../components/Icon.astro';

const sections = [
  {
    id: 'overview',
    title: 'Privacy Overview',
    icon: 'lucide:shield-check',
    summary: 'What we collect and why',
    priority: 'high',
    category: 'essential'
  },
  {
    id: 'information-we-collect',
    title: '1. Information We Collect',
    icon: 'lucide:database',
    summary: 'Types of data we gather',
    priority: 'high',
    category: 'collection'
  },
  {
    id: 'how-we-use',
    title: '2. How We Use Your Information',
    icon: 'lucide:settings',
    summary: 'Purposes of data processing',
    priority: 'high',
    category: 'usage'
  },
  {
    id: 'your-rights',
    title: '3. Your Privacy Rights',
    icon: 'lucide:user-check',
    summary: 'Control your data',
    priority: 'high',
    category: 'rights'
  },
  {
    id: 'data-sharing',
    title: '4. Information Sharing',
    icon: 'lucide:share-2',
    summary: 'When and how we share data',
    priority: 'medium',
    category: 'sharing'
  },
  {
    id: 'security',
    title: '5. Security Measures',
    icon: 'lucide:lock',
    summary: 'How we protect your information',
    priority: 'medium',
    category: 'security'
  },
  {
    id: 'cookies',
    title: '6. Cookie Policy',
    icon: 'lucide:cookie',
    summary: 'Our use of cookies and tracking',
    priority: 'medium',
    category: 'cookies'
  },
  {
    id: 'retention',
    title: '7. Data Retention',
    icon: 'lucide:clock',
    summary: 'How long we keep your data',
    priority: 'low',
    category: 'retention'
  },
  {
    id: 'international',
    title: '8. International Transfers',
    icon: 'lucide:globe',
    summary: 'Cross-border data handling',
    priority: 'low',
    category: 'compliance'
  },
  {
    id: 'legal-bases',
    title: '9. Legal Bases (GDPR)',
    icon: 'lucide:scale',
    summary: 'Legal grounds for processing',
    priority: 'low',
    category: 'compliance'
  },
  {
    id: 'california-rights',
    title: '10. California Privacy Rights',
    icon: 'lucide:map-pin',
    summary: 'CCPA rights for CA residents',
    priority: 'low',
    category: 'compliance'
  },
  {
    id: 'video-recording',
    title: '11. Video Recording Policy',
    icon: 'lucide:video',
    summary: 'Training session recordings',
    priority: 'medium',
    category: 'usage'
  },
  {
    id: 'contact',
    title: '12. Contact & Updates',
    icon: 'lucide:mail',
    summary: 'Reach us with privacy questions',
    priority: 'high',
    category: 'contact'
  }
];

const lastUpdated = 'January 7, 2025';
---

<Layout 
  title="Privacy Policy - Executive AI Training" 
  description="Modern, transparent privacy policy. Learn how we collect, use, and protect your personal information with full control over your data."
>
  <style>
    /* CSS variables for consistent sizing */
    :root {
      --header-height: 5.5rem; /* Define header height globally */
      --sidebar-width: 350px;
    }
    
    /* Enable smooth scrolling with header offset - 2025 best practice */
    html {
      scroll-behavior: smooth;
      scroll-padding-top: var(--header-height); /* Global offset for sticky header */
    }
    
    /* Respect reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
    }

    .privacy-container {
      /* Use CSS variables defined in :root */
    }

    @media (max-width: 1024px) {
      :root {
        --sidebar-width: 100%;
      }
    }

    .progress-bar {
      transition: width 0.3s ease;
    }

    .sticky-nav {
      position: sticky;
      top: var(--header-height, 5.5rem);
      max-height: calc(100vh - var(--header-height, 5.5rem) - 2rem);
      overflow-y: auto;
    }

    .sticky-nav::-webkit-scrollbar {
      width: 4px;
    }

    .sticky-nav::-webkit-scrollbar-track {
      background: transparent;
    }

    .sticky-nav::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 2px;
    }

    details summary {
      cursor: pointer;
      user-select: none;
    }

    details summary::-webkit-details-marker {
      display: none;
    }

    .priority-high {
      border-left: 4px solid #10B981;
    }

    .priority-medium {
      border-left: 4px solid #F59E0B;
    }

    .priority-low {
      border-left: 4px solid #6B7280;
    }

    .category-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.125rem 0.5rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .category-essential {
      background-color: #10B981;
      color: white;
    }

    .category-collection {
      background-color: #3B82F6;
      color: white;
    }

    .category-usage {
      background-color: #8B5CF6;
      color: white;
    }

    .category-rights {
      background-color: #EF4444;
      color: white;
    }

    .category-sharing {
      background-color: #F59E0B;
      color: white;
    }

    .category-security {
      background-color: #10B981;
      color: white;
    }

    .category-cookies {
      background-color: #6B7280;
      color: white;
    }

    .category-retention {
      background-color: #84CC16;
      color: white;
    }

    .category-compliance {
      background-color: #06B6D4;
      color: white;
    }

    .category-contact {
      background-color: #EC4899;
      color: white;
    }

    .data-visual {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 1rem;
      padding: 2rem;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .data-visual::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="50" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="30" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      pointer-events: none;
    }

    .timeline-item {
      border-left: 2px solid #E5E7EB;
      padding-left: 1rem;
      position: relative;
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: -5px;
      top: 0.5rem;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #3B82F6;
    }

    .dark .timeline-item {
      border-left-color: #374151;
    }

    .interactive-toggle {
      transition: all 0.3s ease;
    }

    .interactive-toggle:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .dark .interactive-toggle:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
  </style>

  <!-- Progress Bar -->
  <div class="fixed top-20 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-800 z-40">
    <div id="progress-bar" class="progress-bar h-full bg-brand-gold dark:bg-accent-gold" style="width: 0%"></div>
  </div>

  <!-- Header Section -->
  <section class="bg-gradient-to-br from-gray-50 to-white dark:from-dark-surface dark:to-dark-base py-12 mt-1">
    <div class="container-narrow">
      <AnimatedSection animate="fade">
        <div class="text-center mb-8">
          <div class="inline-flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 rounded-full text-sm font-medium mb-4">
            <Icon name="lucide:shield-check" class="w-4 h-4" />
            <span>Privacy First Design</span>
          </div>
          <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
            Privacy Policy
          </h1>
          <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
            We believe privacy should be simple, transparent, and under your control. This policy explains exactly how we handle your data.
          </p>
        </div>

        <!-- Key Stats Cards -->
        <div class="grid md:grid-cols-4 gap-4 mb-8">
          <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-6 text-center shadow-sm">
            <Icon name="lucide:calendar" class="w-8 h-8 text-brand-gold dark:text-accent-gold mb-3 mx-auto" />
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">Last Updated</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">{lastUpdated}</p>
          </div>
          <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-6 text-center shadow-sm">
            <Icon name="lucide:clock" class="w-8 h-8 text-brand-gold dark:text-accent-gold mb-3 mx-auto" />
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">Reading Time</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">~12 minutes</p>
          </div>
          <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-6 text-center shadow-sm">
            <Icon name="lucide:shield" class="w-8 h-8 text-brand-gold dark:text-accent-gold mb-3 mx-auto" />
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">Data Sales</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">We never sell</p>
          </div>
          <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-6 text-center shadow-sm">
            <Icon name="lucide:globe" class="w-8 h-8 text-brand-gold dark:text-accent-gold mb-3 mx-auto" />
            <h3 class="font-semibold text-gray-900 dark:text-white mb-1">Jurisdiction</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Oklahoma, USA</p>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="flex flex-wrap justify-center gap-4 mb-8">
          <button class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-dark-surface-2 text-gray-700 dark:text-dark-text rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <Icon name="lucide:download" class="w-4 h-4" />
            <span>Download PDF</span>
          </button>
          <button class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-dark-surface-2 text-gray-700 dark:text-dark-text rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <Icon name="lucide:mail" class="w-4 h-4" />
            <span>Email Privacy Team</span>
          </button>
          <button class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-dark-surface-2 text-gray-700 dark:text-dark-text rounded-lg shadow-sm hover:shadow-md transition-shadow">
            <Icon name="lucide:settings" class="w-4 h-4" />
            <span>Manage Preferences</span>
          </button>
        </div>

        <!-- Recent Changes Alert -->
        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-6">
          <h3 class="font-semibold text-blue-900 dark:text-blue-300 mb-2 flex items-center gap-2">
            <Icon name="lucide:info" class="w-5 h-5" />
            Recent Changes
          </h3>
          <p class="text-blue-800 dark:text-blue-300 text-sm">
            <strong>January 7, 2025:</strong> Added new section on AI training data processing and clarified video recording policies for virtual sessions.
          </p>
        </div>
      </AnimatedSection>
    </div>
  </section>

  <!-- Main Content -->
  <section class="section-padding bg-white dark:bg-dark-base">
    <div class="container-narrow">
      <div class="privacy-container lg:grid lg:grid-cols-[var(--sidebar-width)_1fr] lg:gap-8">
        <!-- Sticky Navigation -->
        <aside class="hidden lg:block">
          <nav class="sticky-nav bg-gray-50 dark:bg-dark-surface rounded-xl p-6">
            <h2 class="font-semibold text-gray-900 dark:text-white mb-4">Navigate Privacy Policy</h2>
            
            <!-- Filter by Priority -->
            <div class="mb-4">
              <h3 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">By Priority</h3>
              <div class="flex gap-2 mb-4">
                <button class="filter-btn text-xs px-2 py-1 rounded-full bg-green-100 text-green-800" data-priority="high">High</button>
                <button class="filter-btn text-xs px-2 py-1 rounded-full bg-yellow-100 text-yellow-800" data-priority="medium">Medium</button>
                <button class="filter-btn text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600" data-priority="low">Optional</button>
              </div>
            </div>

            <ul class="space-y-2">
              {sections.map((section) => (
                <li>
                  <a 
                    href={`#${section.id}`}
                    class={`nav-link flex items-start gap-3 p-3 rounded-lg hover:bg-white dark:hover:bg-dark-surface-3 transition-colors group priority-${section.priority}`}
                    data-section={section.id}
                    data-priority={section.priority}
                  >
                    <Icon name={section.icon} class="w-5 h-5 text-gray-400 group-hover:text-brand-gold dark:group-hover:text-accent-gold mt-0.5 flex-shrink-0" />
                    <div class="text-sm">
                      <div class="font-medium text-gray-700 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white">
                        {section.title}
                      </div>
                      <div class="text-gray-500 dark:text-gray-500 text-xs mt-0.5">
                        {section.summary}
                      </div>
                      <span class={`category-badge category-${section.category} mt-1`}>
                        {section.category}
                      </span>
                    </div>
                  </a>
                </li>
              ))}
            </ul>
          </nav>
        </aside>

        <!-- Content Sections -->
        <div class="space-y-8">
          <!-- Privacy Overview -->
          <AnimatedSection animate="slide" class="section-card" id="overview">
            <div class="data-visual">
              <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <Icon name="lucide:shield-check" class="w-8 h-8" />
                Privacy at a Glance
              </h2>
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <h3 class="font-semibold mb-3 flex items-center gap-2">
                    <Icon name="lucide:check" class="w-5 h-5" />
                    What We Do
                  </h3>
                  <ul class="space-y-2 text-sm">
                    <li>✓ Collect only what's needed for training services</li>
                    <li>✓ Use data to improve your learning experience</li>
                    <li>✓ Share data only with your consent</li>
                    <li>✓ Protect your information with enterprise security</li>
                  </ul>
                </div>
                <div>
                  <h3 class="font-semibold mb-3 flex items-center gap-2">
                    <Icon name="lucide:x" class="w-5 h-5" />
                    What We Never Do
                  </h3>
                  <ul class="space-y-2 text-sm">
                    <li>✗ Sell your personal information</li>
                    <li>✗ Share data without clear purpose</li>
                    <li>✗ Use tracking for advertising</li>
                    <li>✗ Keep data longer than necessary</li>
                  </ul>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Information We Collect -->
          <AnimatedSection animate="slide" class="section-card" id="information-we-collect">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:database" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                1. Information We Collect
              </h2>
              
              <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-blue-800 dark:text-blue-300">
                  <strong>Plain English:</strong> We collect information you give us directly, information from your training activities, and basic technical information to keep our services running smoothly.
                </p>
              </div>

              <div class="grid md:grid-cols-3 gap-6">
                <div class="interactive-toggle border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <Icon name="lucide:user" class="w-6 h-6 text-brand-gold dark:text-accent-gold mb-3" />
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Direct Information</h3>
                  <details class="mt-2">
                    <summary class="text-sm font-medium cursor-pointer text-gray-700 dark:text-gray-300">
                      Show Details
                    </summary>
                    <ul class="mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400">
                      <li>• Name, email, phone</li>
                      <li>• Company & job title</li>
                      <li>• Account credentials</li>
                      <li>• Payment information</li>
                      <li>• Professional background</li>
                    </ul>
                  </details>
                </div>

                <div class="interactive-toggle border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <Icon name="lucide:video" class="w-6 h-6 text-brand-gold dark:text-accent-gold mb-3" />
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Training Data</h3>
                  <details class="mt-2">
                    <summary class="text-sm font-medium cursor-pointer text-gray-700 dark:text-gray-300">
                      Show Details
                    </summary>
                    <ul class="mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400">
                      <li>• Session recordings (with consent)</li>
                      <li>• Chat messages</li>
                      <li>• Attendance records</li>
                      <li>• Assessment results</li>
                      <li>• Course progress</li>
                    </ul>
                  </details>
                </div>

                <div class="interactive-toggle border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <Icon name="lucide:monitor" class="w-6 h-6 text-brand-gold dark:text-accent-gold mb-3" />
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Technical Data</h3>
                  <details class="mt-2">
                    <summary class="text-sm font-medium cursor-pointer text-gray-700 dark:text-gray-300">
                      Show Details
                    </summary>
                    <ul class="mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400">
                      <li>• IP address & device info</li>
                      <li>• Browser & OS details</li>
                      <li>• Usage patterns</li>
                      <li>• Performance data</li>
                      <li>• Error logs</li>
                    </ul>
                  </details>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- How We Use Information -->
          <AnimatedSection animate="slide" class="section-card" id="how-we-use">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:settings" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                2. How We Use Your Information
              </h2>
              
              <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-green-800 dark:text-green-300">
                  <strong>Plain English:</strong> We use your information to deliver training services, communicate with you, improve our offerings, and comply with legal requirements. That's it.
                </p>
              </div>

              <div class="space-y-6">
                <div class="timeline-item">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Service Delivery</h3>
                  <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Primary purpose: Providing AI training services</p>
                  <details class="text-sm">
                    <summary class="font-medium cursor-pointer text-gray-700 dark:text-gray-300">View specific uses</summary>
                    <ul class="mt-2 space-y-1 text-gray-600 dark:text-gray-400 ml-4">
                      <li>• Manage course enrollments and access</li>
                      <li>• Process payments and billing</li>
                      <li>• Send session reminders and materials</li>
                      <li>• Track progress and issue certificates</li>
                      <li>• Provide technical support</li>
                    </ul>
                  </details>
                </div>

                <div class="timeline-item">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Communication</h3>
                  <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Keeping you informed and supported</p>
                  <details class="text-sm">
                    <summary class="font-medium cursor-pointer text-gray-700 dark:text-gray-300">View specific uses</summary>
                    <ul class="mt-2 space-y-1 text-gray-600 dark:text-gray-400 ml-4">
                      <li>• Respond to your questions and requests</li>
                      <li>• Send important service updates</li>
                      <li>• Provide customer support</li>
                      <li>• Share relevant training opportunities (with consent)</li>
                    </ul>
                  </details>
                </div>

                <div class="timeline-item">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Service Improvement</h3>
                  <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Making our training better for everyone</p>
                  <details class="text-sm">
                    <summary class="font-medium cursor-pointer text-gray-700 dark:text-gray-300">View specific uses</summary>
                    <ul class="mt-2 space-y-1 text-gray-600 dark:text-gray-400 ml-4">
                      <li>• Analyze learning patterns and effectiveness</li>
                      <li>• Develop new course content</li>
                      <li>• Improve platform functionality</li>
                      <li>• Ensure quality control</li>
                    </ul>
                  </details>
                </div>

                <div class="timeline-item">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Legal & Security</h3>
                  <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Protecting you and our business</p>
                  <details class="text-sm">
                    <summary class="font-medium cursor-pointer text-gray-700 dark:text-gray-300">View specific uses</summary>
                    <ul class="mt-2 space-y-1 text-gray-600 dark:text-gray-400 ml-4">
                      <li>• Comply with legal obligations</li>
                      <li>• Enforce our terms and policies</li>
                      <li>• Prevent fraud and abuse</li>
                      <li>• Maintain platform security</li>
                    </ul>
                  </details>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Your Rights -->
          <AnimatedSection animate="slide" class="section-card" id="your-rights">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:user-check" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                3. Your Privacy Rights
              </h2>
              
              <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-purple-800 dark:text-purple-300">
                  <strong>Plain English:</strong> You're in control. You can access, correct, delete, or export your data anytime. Just ask.
                </p>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:eye" class="w-5 h-5 text-blue-500" />
                      Access Your Data
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Request a copy of all personal information we have about you.</p>
                    <button class="mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline">
                      Request Data Copy →
                    </button>
                  </div>

                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:edit" class="w-5 h-5 text-green-500" />
                      Correct Information
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Update or fix any inaccurate personal information.</p>
                    <button class="mt-2 text-sm text-green-600 dark:text-green-400 hover:underline">
                      Update Profile →
                    </button>
                  </div>

                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:trash-2" class="w-5 h-5 text-red-500" />
                      Delete Your Data
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Request deletion of your personal information (subject to legal requirements).</p>
                    <button class="mt-2 text-sm text-red-600 dark:text-red-400 hover:underline">
                      Request Deletion →
                    </button>
                  </div>
                </div>

                <div class="space-y-4">
                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:download" class="w-5 h-5 text-purple-500" />
                      Export Your Data
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Get your data in a portable format to take elsewhere.</p>
                    <button class="mt-2 text-sm text-purple-600 dark:text-purple-400 hover:underline">
                      Export Data →
                    </button>
                  </div>

                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:pause" class="w-5 h-5 text-orange-500" />
                      Limit Processing
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Restrict how we process your information in certain situations.</p>
                    <button class="mt-2 text-sm text-orange-600 dark:text-orange-400 hover:underline">
                      Manage Limits →
                    </button>
                  </div>

                  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2">
                      <Icon name="lucide:mail-x" class="w-5 h-5 text-gray-500" />
                      Object to Processing
                    </h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Opt out of certain uses of your information.</p>
                    <button class="mt-2 text-sm text-gray-600 dark:text-gray-400 hover:underline">
                      Manage Preferences →
                    </button>
                  </div>
                </div>
              </div>

              <div class="mt-6 p-4 bg-gray-50 dark:bg-dark-surface rounded-lg">
                <h3 class="font-semibold text-gray-900 dark:text-white mb-2">How to Exercise Your Rights</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                  Contact us at <a href="mailto:privacy@executiveai.training" class="text-brand-gold hover:text-accent-gold">privacy@executiveai.training</a> or use the buttons above. We'll respond within 30 days.
                </p>
                <div class="text-xs text-gray-500 dark:text-gray-500">
                  EU residents can also contact your local data protection authority if you're not satisfied with our response.
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Continue with remaining sections... -->
          <!-- For brevity, I'll add the key remaining sections -->

          <!-- Data Sharing -->
          <AnimatedSection animate="slide" class="section-card" id="data-sharing">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:share-2" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                4. Information Sharing
              </h2>
              
              <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-red-800 dark:text-red-300">
                  <strong>Important:</strong> We never sell your personal information. We only share data with trusted partners who help us provide services, and only when necessary.
                </p>
              </div>

              <div class="space-y-6">
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                    <Icon name="lucide:shield" class="w-5 h-5 text-green-500" />
                    Trusted Service Providers
                  </h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                    We work with carefully selected partners who help us deliver our services:
                  </p>
                  <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div>
                      <strong class="text-gray-900 dark:text-white">Payment Processing:</strong>
                      <p class="text-gray-600 dark:text-gray-400">Stripe, PayPal (for secure transactions)</p>
                    </div>
                    <div>
                      <strong class="text-gray-900 dark:text-white">Video Conferencing:</strong>
                      <p class="text-gray-600 dark:text-gray-400">Zoom, Microsoft Teams (for training)</p>
                    </div>
                    <div>
                      <strong class="text-gray-900 dark:text-white">Email Services:</strong>
                      <p class="text-gray-600 dark:text-gray-400">Course communications</p>
                    </div>
                    <div>
                      <strong class="text-gray-900 dark:text-white">Cloud Storage:</strong>
                      <p class="text-gray-600 dark:text-gray-400">AWS, Google Cloud (for data security)</p>
                    </div>
                  </div>
                </div>

                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                    <Icon name="lucide:scale" class="w-5 h-5 text-blue-500" />
                    Legal Requirements
                  </h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    We may disclose information when required by law, court order, or government request. We'll notify you unless legally prohibited.
                  </p>
                </div>

                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
                    <Icon name="lucide:building" class="w-5 h-5 text-purple-500" />
                    Business Transfers
                  </h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    If our company is acquired or merged, your information may be transferred. You'll be notified of any changes in ownership.
                  </p>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Security Measures -->
          <AnimatedSection animate="slide" class="section-card" id="security">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:lock" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                5. Security Measures
              </h2>
              
              <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-green-800 dark:text-green-300">
                  <strong>Security First:</strong> We use enterprise-grade security measures to protect your information, including encryption, access controls, and regular security audits.
                </p>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div class="border border-green-200 dark:border-green-700 rounded-lg p-4 bg-green-50 dark:bg-green-900/10">
                    <Icon name="lucide:shield-check" class="w-6 h-6 text-green-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Data Encryption</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">All data encrypted in transit and at rest using industry-standard protocols.</p>
                  </div>

                  <div class="border border-blue-200 dark:border-blue-700 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/10">
                    <Icon name="lucide:key" class="w-6 h-6 text-blue-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Access Controls</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Strict access controls and multi-factor authentication for all team members.</p>
                  </div>

                  <div class="border border-purple-200 dark:border-purple-700 rounded-lg p-4 bg-purple-50 dark:bg-purple-900/10">
                    <Icon name="lucide:search" class="w-6 h-6 text-purple-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Regular Audits</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Quarterly security assessments and penetration testing.</p>
                  </div>
                </div>

                <div class="space-y-4">
                  <div class="border border-orange-200 dark:border-orange-700 rounded-lg p-4 bg-orange-50 dark:bg-orange-900/10">
                    <Icon name="lucide:users" class="w-6 h-6 text-orange-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Staff Training</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">All employees complete privacy and security training with signed confidentiality agreements.</p>
                  </div>

                  <div class="border border-red-200 dark:border-red-700 rounded-lg p-4 bg-red-50 dark:bg-red-900/10">
                    <Icon name="lucide:alert-triangle" class="w-6 h-6 text-red-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Incident Response</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">24/7 monitoring with established incident response procedures.</p>
                  </div>

                  <div class="border border-teal-200 dark:border-teal-700 rounded-lg p-4 bg-teal-50 dark:bg-teal-900/10">
                    <Icon name="lucide:cloud" class="w-6 h-6 text-teal-600 mb-2" />
                    <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Secure Infrastructure</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400">SOC 2 compliant cloud infrastructure with redundant backups.</p>
                  </div>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Cookie Policy -->
          <AnimatedSection animate="slide" class="section-card" id="cookies">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:cookie" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                6. Cookie Policy
              </h2>
              
              <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-orange-800 dark:text-orange-300">
                  <strong>Plain English:</strong> We use cookies to keep you logged in, remember your preferences, and analyze how our site is used. You can control these through your browser settings.
                </p>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Essential Cookies</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Required for basic site functionality</p>
                  <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                    <li>• Authentication tokens</li>
                    <li>• Session management</li>
                    <li>• Security features</li>
                  </ul>
                </div>
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Analytics Cookies</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Help us improve our services</p>
                  <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                    <li>• Usage patterns</li>
                    <li>• Performance monitoring</li>
                    <li>• Feature effectiveness</li>
                  </ul>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Data Retention -->
          <AnimatedSection animate="slide" class="section-card" id="retention">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:clock" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                7. Data Retention
              </h2>
              
              <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-blue-800 dark:text-blue-300">
                  <strong>Plain English:</strong> We keep your data only as long as needed to provide services or as required by law. You can request deletion anytime.
                </p>
              </div>

              <div class="space-y-4">
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Account Information</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Retained for the duration of your account plus 30 days for cleanup</p>
                </div>
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Training Records</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Kept for 7 years for certification and compliance purposes</p>
                </div>
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Video Recordings</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Stored for 6 months unless longer retention is agreed upon</p>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- International Transfers -->
          <AnimatedSection animate="slide" class="section-card" id="international">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:globe" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                8. International Transfers
              </h2>
              
              <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-purple-800 dark:text-purple-300">
                  <strong>Plain English:</strong> Some of our service providers are located outside your country. We ensure your data is protected with appropriate safeguards wherever it goes.
                </p>
              </div>

              <div class="space-y-4">
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Data Protection Measures</h3>
                  <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                    <li>• Standard Contractual Clauses (EU-approved)</li>
                    <li>• Adequacy decisions from relevant authorities</li>
                    <li>• Privacy Shield certification (where applicable)</li>
                    <li>• Your explicit consent when required</li>
                  </ul>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Legal Bases (GDPR) -->
          <AnimatedSection animate="slide" class="section-card" id="legal-bases">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:scale" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                9. Legal Bases (GDPR)
              </h2>
              
              <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-blue-800 dark:text-blue-300">
                  <strong>For EU Residents:</strong> We process your data based on specific legal grounds required by GDPR. Here's what applies to different types of processing.
                </p>
              </div>

              <div class="space-y-4">
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Contract Performance</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Processing necessary to provide the training services you've signed up for</p>
                </div>
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Legitimate Interests</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">For business operations, security, and service improvements that benefit you</p>
                </div>
                <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-2">Consent</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">For marketing communications and optional features like video recording</p>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- California Privacy Rights -->
          <AnimatedSection animate="slide" class="section-card" id="california-rights">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:map-pin" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                10. California Privacy Rights
              </h2>
              
              <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-yellow-800 dark:text-yellow-300">
                  <strong>For California Residents:</strong> You have additional privacy rights under the California Consumer Privacy Act (CCPA). Here's what you can do.
                </p>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Your CCPA Rights</h3>
                  <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-2">
                    <li>• Know what personal information we collect and use</li>
                    <li>• Delete your personal information (with exceptions)</li>
                    <li>• Opt out of data sales (we don't sell data)</li>
                    <li>• Non-discrimination for exercising these rights</li>
                  </ul>
                </div>
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">How to Exercise Rights</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Contact us at:</p>
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    Email: privacy@executiveai.training<br>
                    Phone: 1-800-XXX-XXXX<br>
                    Response time: 45 days
                  </p>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Video Recording Policy -->
          <AnimatedSection animate="slide" class="section-card" id="video-recording">
            <div class="bg-white dark:bg-dark-surface-2 rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-3">
                <Icon name="lucide:video" class="w-8 h-8 text-brand-gold dark:text-accent-gold" />
                11. Video Recording Policy
              </h2>
              
              <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-4 mb-6">
                <p class="text-sm text-red-800 dark:text-red-300">
                  <strong>Training Sessions:</strong> We may record virtual training sessions for quality and review purposes. Your consent is always required before any recording begins.
                </p>
              </div>

              <div class="space-y-6">
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Recording Practices</h3>
                  <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-2">
                    <li>• Clear notification before recording starts</li>
                    <li>• Participant consent required for each session</li>
                    <li>• Option to participate without being recorded</li>
                    <li>• Secure storage with restricted access</li>
                    <li>• Automatic deletion after 6 months</li>
                  </ul>
                </div>
                <div>
                  <h3 class="font-semibold text-gray-900 dark:text-white mb-3">Your Options</h3>
                  <p class="text-sm text-gray-600 dark:text-gray-400">
                    You can turn off your camera and microphone at any time during a session if you prefer not to be recorded. This won't affect your ability to participate in the training.
                  </p>
                </div>
              </div>
            </div>
          </AnimatedSection>

          <!-- Contact Section -->
          <AnimatedSection animate="slide" class="section-card" id="contact">
            <div class="bg-gradient-to-r from-brand-gold to-accent-gold text-white rounded-xl p-8 shadow-sm">
              <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                <Icon name="lucide:mail" class="w-8 h-8" />
                Questions About Privacy?
              </h2>
              
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <h3 class="font-semibold mb-3">Privacy Team</h3>
                  <div class="space-y-2 text-sm">
                    <p><strong>Email:</strong> privacy@executiveai.training</p>
                    <p><strong>Response Time:</strong> Within 1 business day</p>
                    <p><strong>Phone:</strong> Available for urgent matters</p>
                  </div>
                </div>
                <div>
                  <h3 class="font-semibold mb-3">Mailing Address</h3>
                  <div class="text-sm">
                    <p><strong>Grey Matter LLC</strong><br />
                    Data Protection Officer<br />
                    Tulsa, Oklahoma<br />
                    United States</p>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-white/20">
                <p class="text-sm">
                  <strong>Last Updated:</strong> {lastUpdated} | 
                  <strong>Next Review:</strong> January 2026
                </p>
                <p class="text-xs mt-2 opacity-80">
                  For EU residents: You may also contact your local data protection authority with privacy concerns.
                </p>
              </div>
            </div>
          </AnimatedSection>
        </div>
      </div>
    </div>
  </section>

  <!-- Modern Navigation Script - 2025 Best Practices -->
  <script>
    // Modern scroll navigation implementation
    class ScrollNavigation {
      constructor() {
        console.log('🚀 ScrollNavigation constructor starting...');
        
        this.progressBar = document.getElementById('progress-bar');
        this.sections = Array.from(document.querySelectorAll('.section-card'));
        this.navLinks = Array.from(document.querySelectorAll('a[href^="#"]'));
        this.filterButtons = Array.from(document.querySelectorAll('.filter-btn'));
        
        // Get header height from CSS variable for consistency
        const rootStyle = getComputedStyle(document.documentElement);
        const headerHeight = rootStyle.getPropertyValue('--header-height') || '5.5rem';
        // Convert rem to pixels
        this.headerOffset = parseFloat(headerHeight) * parseFloat(rootStyle.fontSize);
        
        console.log('📊 Elements found:');
        console.log('  - Progress bar:', !!this.progressBar);
        console.log('  - Sections:', this.sections.length, this.sections.map(s => s.id));
        console.log('  - Nav links:', this.navLinks.length, this.navLinks.map(l => l.getAttribute('href')));
        console.log('  - Filter buttons:', this.filterButtons.length);
        console.log('  - Header offset:', this.headerOffset + 'px', `(from CSS var: ${headerHeight})`);
        
        this.init();
      }
      
      init() {
        console.log('🔧 Initializing ScrollNavigation...');
        this.setupIntersectionObserver();
        this.setupScrollListeners();
        this.setupNavigationClicks();
        this.setupPriorityFilters();
        this.updateProgress();
        console.log('✅ ScrollNavigation initialization complete');
      }
      
      // Modern Intersection Observer for section tracking
      setupIntersectionObserver() {
        console.log('👁️ Setting up Intersection Observer...');
        const options = {
          root: null,
          rootMargin: `-${this.headerOffset}px 0px -60% 0px`,
          threshold: [0, 0.25, 0.5, 0.75, 1]
        };
        
        console.log('Observer options:', options);
        
        this.observer = new IntersectionObserver((entries) => {
          console.log('👁️ Intersection Observer callback triggered with', entries.length, 'entries');
          let mostVisible = null;
          let maxRatio = 0;
          
          entries.forEach(entry => {
            console.log(`  - Section ${entry.target.id}: intersecting=${entry.isIntersecting}, ratio=${entry.intersectionRatio}`);
            if (entry.isIntersecting && entry.intersectionRatio > maxRatio) {
              maxRatio = entry.intersectionRatio;
              mostVisible = entry.target;
            }
          });
          
          if (mostVisible) {
            console.log(`🎯 Most visible section: ${mostVisible.id} (ratio: ${maxRatio})`);
            this.updateActiveNavigation(mostVisible.id);
          }
        }, options);
        
        console.log(`📍 Observing ${this.sections.length} sections...`);
        this.sections.forEach(section => {
          console.log(`  - Observing section: ${section.id}`);
          this.observer.observe(section);
        });
      }
      
      // Update active navigation state
      updateActiveNavigation(activeId) {
        console.log(`🎯 updateActiveNavigation called for section: ${activeId}`);
        console.log(`📝 Updating ${this.navLinks.length} nav links...`);
        
        this.navLinks.forEach((link, index) => {
          const href = link.getAttribute('href');
          const targetId = href?.substring(1);
          const isActive = targetId === activeId;
          
          console.log(`  - Link ${index}: href="${href}", targetId="${targetId}", isActive=${isActive}`);
          
          link.classList.toggle('bg-white', isActive);
          link.classList.toggle('dark:bg-dark-surface-3', isActive);
          link.classList.toggle('shadow-sm', isActive);
        });
      }
      
      // Modern scroll to element
      scrollToElement(targetId) {
        console.log(`🚀 scrollToElement called with targetId: "${targetId}"`);
        
        const target = document.getElementById(targetId);
        console.log(`🎯 Target element found:`, !!target, target ? `(tagName: ${target.tagName}, classes: ${target.className})` : '(NOT FOUND)');
        
        if (!target) {
          console.error(`❌ Target element with id "${targetId}" not found!`);
          return false;
        }
        
        // Check for reduced motion preference
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        console.log(`♿ Prefers reduced motion: ${prefersReducedMotion}`);
        
        // Get initial position for logging
        const initialRect = target.getBoundingClientRect();
        console.log(`📍 Initial target position: top=${initialRect.top}, left=${initialRect.left}`);
        
        // Modern approach with scrollIntoView
        console.log(`📜 Calling scrollIntoView with behavior: ${prefersReducedMotion ? 'auto' : 'smooth'}`);
        target.scrollIntoView({
          behavior: prefersReducedMotion ? 'auto' : 'smooth',
          block: 'start',
          inline: 'nearest'
        });
        
        // Note: scroll-margin-top CSS property handles the header offset automatically
        console.log(`✅ Scroll initiated - CSS scroll-margin-top will handle header offset`);
        
        // Accessibility: Set focus to target for screen readers
        console.log(`♿ Setting focus to target element`);
        target.setAttribute('tabindex', '-1');
        target.focus({ preventScroll: true });
        
        console.log(`✅ scrollToElement completed successfully`);
        return true;
      }
      
      // Setup navigation click handlers
      setupNavigationClicks() {
        console.log(`🖱️ Setting up navigation click handlers...`);
        
        // Use event delegation for better performance
        document.addEventListener('click', (e) => {
          console.log(`🖱️ Click event detected on:`, e.target);
          
          const link = e.target.closest('a[href^="#"]');
          console.log(`🔗 Found navigation link:`, !!link, link ? `(href: ${link.getAttribute('href')})` : '(NOT FOUND)');
          
          if (!link) {
            console.log(`⚠️ Click was not on a navigation link, ignoring`);
            return;
          }
          
          const href = link.getAttribute('href');
          console.log(`📋 Link href: "${href}"`);
          
          if (!href || href === '#') {
            console.log(`⚠️ Invalid href, ignoring click`);
            return;
          }
          
          console.log(`🚫 Preventing default click behavior`);
          e.preventDefault();
          
          const targetId = href.substring(1);
          console.log(`🎯 Extracted targetId: "${targetId}"`);
          
          console.log(`🚀 Calling scrollToElement for targetId: "${targetId}"`);
          const scrollSuccess = this.scrollToElement(targetId);
          
          if (scrollSuccess) {
            console.log(`📝 Scroll successful, updating URL...`);
            // Update URL without triggering scroll
            if (history.pushState) {
              history.pushState(null, null, href);
              console.log(`✅ URL updated to: ${href}`);
            } else {
              console.log(`⚠️ history.pushState not available`);
            }
          } else {
            console.error(`❌ Scroll failed for targetId: "${targetId}"`);
          }
        });
        
        console.log(`✅ Navigation click handlers setup complete`);
      }
      
      // Progress bar updates
      updateProgress() {
        if (!this.progressBar) return;
        
        const scrolled = window.pageYOffset;
        const maxHeight = document.documentElement.scrollHeight - window.innerHeight;
        const progress = maxHeight > 0 ? (scrolled / maxHeight) * 100 : 0;
        
        this.progressBar.style.width = `${Math.min(Math.max(progress, 0), 100)}%`;
      }
      
      // Scroll event handling with throttling
      setupScrollListeners() {
        let ticking = false;
        
        const handleScroll = () => {
          if (!ticking) {
            requestAnimationFrame(() => {
              this.updateProgress();
              ticking = false;
            });
            ticking = true;
          }
        };
        
        window.addEventListener('scroll', handleScroll, { passive: true });
      }
      
      // Priority filter functionality
      setupPriorityFilters() {
        this.filterButtons.forEach(button => {
          button.addEventListener('click', () => {
            const priority = button.getAttribute('data-priority');
            
            // Update button states
            this.filterButtons.forEach(btn => btn.classList.remove('opacity-50'));
            button.classList.toggle('opacity-50');
            
            // Filter nav items
            this.navLinks.forEach(link => {
              const linkPriority = link.getAttribute('data-priority');
              const isVisible = !button.classList.contains('opacity-50') || linkPriority === priority;
              link.style.display = isVisible ? 'flex' : 'none';
            });
          });
        });
      }
      
      // Handle initial page load with hash
      handleInitialHash() {
        if (window.location.hash) {
          setTimeout(() => {
            const targetId = window.location.hash.substring(1);
            this.scrollToElement(targetId);
          }, 100);
        }
      }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        const navigation = new ScrollNavigation();
        navigation.handleInitialHash();
      });
    } else {
      const navigation = new ScrollNavigation();
      navigation.handleInitialHash();
    }
  </script>
</Layout>