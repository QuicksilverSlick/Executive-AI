---
import Layout from '../layouts/Layout.astro';
import Button from '../components/Button.astro';
import AnimatedSection from '../components/AnimatedSection.astro';
import Icon from '../components/Icon.astro';

const resources = [
  {
    id: 'ai-readiness-assessment',
    title: 'AI Readiness Assessment Tool',
    description: 'Evaluate your organization\'s preparedness for AI implementation with our comprehensive 50-point assessment.',
    type: 'Tool',
    icon: 'lucide:bar-chart-3',
    value: '$2,500',
    gated: true,
    popular: true
  },
  {
    id: 'executive-ai-playbook',
    title: 'The Executive AI Playbook',
    description: '47-page guide covering AI strategy, implementation roadmaps, and ROI calculation frameworks.',
    type: 'Guide',
    icon: 'lucide:book-open',
    value: '$997',
    gated: true,
    popular: true
  },
  {
    id: 'ai-vendor-comparison',
    title: 'AI Vendor Comparison Matrix',
    description: 'Side-by-side comparison of 25+ enterprise AI platforms with pricing, features, and use cases.',
    type: 'Spreadsheet',
    icon: 'lucide:table',
    value: '$497',
    gated: true,
    popular: false
  },
  {
    id: 'prompting-templates',
    title: 'Executive Prompting Templates',
    description: 'Battle-tested prompts for strategy, analysis, and decision-making across 15 business functions.',
    type: 'Templates',
    icon: 'lucide:file-text',
    value: '$297',
    gated: true,
    popular: false
  },
  {
    id: 'ai-glossary',
    title: 'AI Terms Every Executive Should Know',
    description: 'Demystify AI jargon with our plain-English glossary of 100+ essential terms.',
    type: 'Reference',
    icon: 'lucide:book',
    value: 'Free',
    gated: false,
    popular: false
  },
  {
    id: 'roi-calculator',
    title: 'AI ROI Calculator',
    description: 'Calculate potential savings and efficiency gains from AI implementation in your organization.',
    type: 'Calculator',
    icon: 'lucide:calculator',
    value: '$197',
    gated: true,
    popular: true
  }
];

const schema = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "AI Resources for Executives",
  "description": "Premium tools, guides, and templates to accelerate your AI transformation journey.",
  "url": "https://executiveaitraining.com/resources",
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": resources.map((resource, index) => ({
      "@type": "ListItem",
      "position": index + 1,
      "item": {
        "@type": "DigitalDocument",
        "name": resource.title,
        "description": resource.description,
        "offers": {
          "@type": "Offer",
          "price": resource.value === 'Free' ? '0' : resource.value.replace('$', '').replace(',', ''),
          "priceCurrency": "USD"
        }
      }
    }))
  }
};
---

<Layout 
  title="AI Resources for Executives" 
  description="Premium tools, guides, and templates to accelerate your AI transformation journey."
  schema={schema}
>
  <!-- Hero Section -->
  <section class="pt-32 pb-16 bg-gradient-to-br from-brand-pearl to-gray-50 dark:from-dark-base dark:to-dark-surface">
    <div class="container-narrow">
      <AnimatedSection animate="fade">
        <div class="text-center max-w-3xl mx-auto">
          <h1 class="text-4xl md:text-6xl font-bold text-brand-charcoal dark:text-dark-text mb-6">
            Your AI Transformation Toolkit
          </h1>
          <p class="text-xl text-gray-700 dark:text-dark-text-secondary mb-8">
            Battle-tested resources worth over $4,700. Get instant access to the same tools 
            we use with our $15,000 masterclass clients.
          </p>
          <div class="flex flex-col sm:flex-row items-center justify-center gap-6 sm:gap-8 text-sm text-gray-600 dark:text-dark-text-tertiary">
            <div class="flex items-center gap-3">
              <Icon name="lucide:users" size={24} class="text-brand-gold dark:text-accent-gold flex-shrink-0" />
              <span class="text-center sm:text-left">Downloaded by 2,847 executives</span>
            </div>
            <div class="flex items-center gap-3">
              <Icon name="lucide:star" size={24} class="text-brand-gold dark:text-accent-gold flex-shrink-0" />
              <span class="text-center sm:text-left">Average rating: 4.9/5</span>
            </div>
          </div>
        </div>
      </AnimatedSection>
    </div>
  </section>

  <!-- Resources Grid -->
  <section class="section-padding">
    <div class="container-narrow">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {resources.map((resource, index) => (
          <AnimatedSection animate="slide" delay={index * 0.1}>
            <div class={`resource-card bg-white dark:bg-dark-surface-2 rounded-lg shadow-lg dark:shadow-black/30 overflow-hidden hover:shadow-2xl dark:hover:shadow-black/40 transition-all duration-300 ${resource.popular ? 'ring-2 ring-brand-gold dark:ring-accent-gold' : ''} border border-gray-100 dark:border-dark-border`}>
              {resource.popular && (
                <div class="bg-brand-gold dark:bg-accent-gold text-white dark:text-dark-base text-center py-1 text-sm font-semibold">
                  MOST POPULAR
                </div>
              )}
              
              <div class="p-6">
                <div class="flex items-start justify-between mb-4">
                  <div class="w-12 h-12 bg-brand-navy/10 dark:bg-accent-gold/20 rounded-lg flex items-center justify-center">
                    <Icon name={resource.icon} class="w-6 h-6 text-brand-navy dark:text-accent-gold" />
                  </div>
                  <span class="text-xs font-semibold text-gray-500 dark:text-dark-text-muted uppercase tracking-wider">
                    {resource.type}
                  </span>
                </div>
                
                <h3 class="text-xl font-bold text-brand-charcoal dark:text-dark-text mb-2">
                  {resource.title}
                </h3>
                
                <p class="text-gray-600 dark:text-dark-text-tertiary mb-4 text-sm leading-relaxed">
                  {resource.description}
                </p>
                
                <div class="flex items-center justify-between mb-4">
                  <span class="text-sm text-gray-500 dark:text-dark-text-muted">Value:</span>
                  <span class="text-lg font-bold text-brand-charcoal dark:text-dark-text">{resource.value}</span>
                </div>
                
                {resource.gated ? (
                  <Button 
                    href={`#download-${resource.id}`}
                    class="w-full justify-center resource-download"
                    data-resource={resource.id}
                    data-value={resource.value}
                  >
                    Get Instant Access
                  </Button>
                ) : (
                  <Button 
                    href={`/downloads/${resource.id}.md`}
                    variant="secondary"
                    class="w-full justify-center"
                    download
                  >
                    Download Free
                  </Button>
                )}
              </div>
            </div>
          </AnimatedSection>
        ))}
      </div>
    </div>
  </section>

  <!-- Trust Section -->
  <section class="section-padding bg-gray-50 dark:bg-dark-base">
    <div class="container-narrow">
      <AnimatedSection animate="fade">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-brand-charcoal dark:text-dark-text mb-4">
            Trusted by Industry Leaders
          </h2>
          <p class="text-lg text-gray-700 dark:text-dark-text-secondary">
            Join executives from these companies who've transformed their operations with our resources
          </p>
        </div>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 items-center">
          <!-- Tech Company -->
          <div class="flex flex-col items-center gap-2 group">
            <div class="w-20 h-20 bg-gray-100 dark:bg-dark-surface-3 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-dark-surface-4 transition-colors">
              <Icon name="lucide:globe-2" class="w-10 h-10 text-gray-600 dark:text-dark-text-secondary" />
            </div>
            <span class="text-sm font-semibold text-gray-600 dark:text-dark-text-tertiary">GlobalTech Corp</span>
          </div>
          
          <!-- Finance Company -->
          <div class="flex flex-col items-center gap-2 group">
            <div class="w-20 h-20 bg-gray-100 dark:bg-dark-surface-3 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-dark-surface-4 transition-colors">
              <Icon name="lucide:landmark" class="w-10 h-10 text-gray-600 dark:text-dark-text-secondary" />
            </div>
            <span class="text-sm font-semibold text-gray-600 dark:text-dark-text-tertiary">Apex Financial</span>
          </div>
          
          <!-- Healthcare Company -->
          <div class="flex flex-col items-center gap-2 group">
            <div class="w-20 h-20 bg-gray-100 dark:bg-dark-surface-3 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-dark-surface-4 transition-colors">
              <Icon name="lucide:heart-pulse" class="w-10 h-10 text-gray-600 dark:text-dark-text-secondary" />
            </div>
            <span class="text-sm font-semibold text-gray-600 dark:text-dark-text-tertiary">MedLife Group</span>
          </div>
          
          <!-- Manufacturing Company -->
          <div class="flex flex-col items-center gap-2 group">
            <div class="w-20 h-20 bg-gray-100 dark:bg-dark-surface-3 rounded-lg flex items-center justify-center group-hover:bg-gray-200 dark:group-hover:bg-dark-surface-4 transition-colors">
              <Icon name="lucide:factory" class="w-10 h-10 text-gray-600 dark:text-dark-text-secondary" />
            </div>
            <span class="text-sm font-semibold text-gray-600 dark:text-dark-text-tertiary">Industrial Pro</span>
          </div>
        </div>
      </AnimatedSection>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="section-padding">
    <div class="container-narrow">
      <AnimatedSection animate="slide">
        <div class="max-w-3xl mx-auto">
          <h2 class="text-3xl font-bold text-brand-charcoal dark:text-dark-text mb-8 text-center">
            Frequently Asked Questions
          </h2>
          
          <div class="space-y-6">
            <div class="bg-white dark:bg-dark-surface-2 rounded-lg shadow-md dark:shadow-black/20 p-6 border border-gray-100 dark:border-dark-border">
              <h3 class="text-lg font-semibold text-brand-charcoal dark:text-dark-text mb-2">
                Are these resources really free?
              </h3>
              <p class="text-gray-700 dark:text-dark-text-secondary">
                Yes! In exchange for your email, you get instant access to all resources. 
                These are the same materials we use in our paid programs.
              </p>
            </div>
            
            <div class="bg-white dark:bg-dark-surface-2 rounded-lg shadow-md dark:shadow-black/20 p-6 border border-gray-100 dark:border-dark-border">
              <h3 class="text-lg font-semibold text-brand-charcoal dark:text-dark-text mb-2">
                How are these different from generic AI guides?
              </h3>
              <p class="text-gray-700 dark:text-dark-text-secondary">
                These resources are specifically designed for C-suite executives. 
                No technical jargon, just practical strategies you can implement immediately.
              </p>
            </div>
            
            <div class="bg-white dark:bg-dark-surface-2 rounded-lg shadow-md dark:shadow-black/20 p-6 border border-gray-100 dark:border-dark-border">
              <h3 class="text-lg font-semibold text-brand-charcoal dark:text-dark-text mb-2">
                Do I need technical knowledge to use these?
              </h3>
              <p class="text-gray-700 dark:text-dark-text-secondary">
                Absolutely not. Everything is written in plain English with step-by-step 
                instructions that any executive can follow.
              </p>
            </div>
          </div>
        </div>
      </AnimatedSection>
    </div>
  </section>
</Layout>

<!-- Email Gate Modal -->
<div id="resource-modal" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-black bg-opacity-50 dark:bg-opacity-70"></div>
  <div class="relative min-h-screen flex items-center justify-center p-4">
    <div class="bg-white dark:bg-dark-surface-2 rounded-xl shadow-2xl dark:shadow-black/50 max-w-md w-full p-8 transform transition-all border border-gray-100 dark:border-dark-border">
      <button id="close-modal" class="absolute top-4 right-4 text-gray-400 dark:text-dark-text-muted hover:text-gray-600 dark:hover:text-dark-text">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      
      <div class="text-center mb-6">
        <div class="text-5xl mb-4">🎁</div>
        <h3 class="text-2xl font-bold text-brand-charcoal mb-2">
          Get Instant Access
        </h3>
        <p class="text-gray-700">
          Enter your email to unlock <span id="resource-value" class="font-semibold"></span> worth of AI resources
        </p>
      </div>
      
      <form id="resource-form" class="space-y-4">
        <input type="hidden" id="resource-id" name="resource_id" />
        
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
            Email Address
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="your@company.com"
            class="w-full px-4 py-3 border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface-4 text-gray-900 dark:text-dark-text rounded-md focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent"
          />
        </div>
        
        <div>
          <label for="company" class="block text-sm font-medium text-gray-700 mb-1">
            Company
          </label>
          <input
            type="text"
            id="company"
            name="company"
            required
            placeholder="Your Company"
            class="w-full px-4 py-3 border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface-4 text-gray-900 dark:text-dark-text rounded-md focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent"
          />
        </div>
        
        <Button type="submit" class="w-full justify-center">
          Send Me The Resources
        </Button>
        
        <p class="text-xs text-gray-500 text-center">
          We respect your privacy. Unsubscribe at any time.
        </p>
      </form>
      
      <div id="success-message" class="hidden text-center">
        <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        <h3 class="text-xl font-bold text-brand-charcoal mb-2">
          Check Your Email!
        </h3>
        <p class="text-gray-700">
          We've sent your resources to <span id="success-email" class="font-semibold"></span>
        </p>
      </div>
    </div>
  </div>
</div>

<style>
  .resource-card {
    transition: transform 0.3s ease;
  }
  
  .resource-card:hover {
    transform: translateY(-4px);
  }
</style>

<script>
  // Resource download tracking and modal
  const modal = document.getElementById('resource-modal');
  const closeModal = document.getElementById('close-modal');
  const resourceForm = document.getElementById('resource-form');
  const successMessage = document.getElementById('success-message');
  const resourceIdInput = document.getElementById('resource-id');
  const resourceValueSpan = document.getElementById('resource-value');
  const successEmailSpan = document.getElementById('success-email');
  
  // Track resource views
  document.querySelectorAll('.resource-card').forEach(card => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const resourceName = card.querySelector('h3')?.textContent || 'Unknown';
          if (window.gtag) {
            window.gtag('event', 'content_engagement', {
              content_type: 'resource',
              content_name: resourceName,
              engagement_action: 'view'
            });
          }
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.5 });
    
    observer.observe(card);
  });
  
  // Handle resource download clicks
  document.querySelectorAll('.resource-download').forEach(button => {
    button.addEventListener('click', (e) => {
      e.preventDefault();
      const resourceId = button.getAttribute('data-resource');
      const resourceValue = button.getAttribute('data-value');
      
      // Set modal values
      resourceIdInput.value = resourceId;
      resourceValueSpan.textContent = resourceValue;
      
      // Show modal
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      
      // Track modal open
      if (window.gtag) {
        window.gtag('event', 'resource_modal_open', {
          resource_id: resourceId,
          resource_value: resourceValue
        });
      }
    });
  });
  
  // Close modal
  closeModal.addEventListener('click', () => {
    modal.classList.add('hidden');
    document.body.style.overflow = '';
    resourceForm.reset();
    resourceForm.style.display = 'block';
    successMessage.classList.add('hidden');
  });
  
  // Handle form submission
  resourceForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(resourceForm);
    const data = {
      email: formData.get('email'),
      company: formData.get('company'),
      resource_id: formData.get('resource_id')
    };
    
    // Track lead generation
    if (window.gtag) {
      window.gtag('event', 'generate_lead', {
        value: 0,
        currency: 'USD',
        lead_source: 'resource_download',
        resource_id: data.resource_id
      });
    }
    
    // Submit to API
    try {
      const response = await fetch('/api/download-resource', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      });
      
      const result = await response.json();
      
      if (result.success) {
        // Show success message
        successEmailSpan.textContent = data.email || '';
        resourceForm.style.display = 'none';
        successMessage.classList.remove('hidden');
        
        // If there's a download URL, trigger download
        if (result.downloadUrl) {
          setTimeout(() => {
            window.location.href = result.downloadUrl;
          }, 1000);
        }
      } else {
        alert('Sorry, there was an error. Please try again.');
      }
    } catch (error) {
      console.error('Error:', error);
      alert('Sorry, there was an error. Please try again.');
    }
    
    // Close modal after 3 seconds
    setTimeout(() => {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
      resourceForm.reset();
      resourceForm.style.display = 'block';
      successMessage.classList.add('hidden');
    }, 3000);
  });
  
  // Close modal on background click
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
      resourceForm.reset();
      resourceForm.style.display = 'block';
      successMessage.classList.add('hidden');
    }
  });
</script>