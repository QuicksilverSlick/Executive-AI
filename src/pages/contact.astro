---
import Layout from '../layouts/Layout.astro';
import AnimatedSection from '../components/AnimatedSection.astro';
import Icon from '../components/Icon.astro';

// Response time expectations (2025 best practice)
const responseTimesData = {
  email: '< 4 hours',
  phone: 'Immediate',
  form: '< 24 hours'
};

// Contact channels with priority indicators
const contactChannels = [
  {
    id: 'schedule-call',
    title: 'Schedule a Call',
    description: 'Book a free 30-minute strategy session',
    icon: 'lucide:calendar-check',
    priority: 'Personal',
    responseTime: 'At your convenience',
    available: true,
    action: 'Book Now',
    link: '/schedule'
  },
  {
    id: 'email-us',
    title: 'Email Us',
    description: 'Detailed inquiries and document sharing',
    icon: 'lucide:mail',
    priority: 'Detailed',
    responseTime: '< 4 hours',
    available: true,
    action: 'support@executiveai.training',
    link: 'mailto:support@executiveai.training'
  },
  {
    id: 'call-direct',
    title: 'Call Directly',
    description: 'Speak with our team immediately',
    icon: 'lucide:phone',
    priority: 'Urgent',
    responseTime: 'Business hours',
    available: true,
    action: '(918) 555-1234',
    link: 'tel:+19185551234'
  }
];

// FAQ items for self-service
const faqs = [
  {
    question: 'What is the best way to reach you?',
    answer: 'For immediate assistance, use our live chat. For detailed inquiries, email is best. For urgent matters during business hours, call us directly.'
  },
  {
    question: 'What are your business hours?',
    answer: 'We\'re available Monday through Friday, 8:00 AM - 6:00 PM CST. Live chat and email support may be available outside these hours.'
  },
  {
    question: 'How quickly will I get a response?',
    answer: 'Live chat: < 2 minutes, Email: < 4 hours, Phone: Immediate during business hours, Contact form: < 24 hours.'
  },
  {
    question: 'Do you offer emergency support?',
    answer: 'Yes, enterprise clients have access to 24/7 emergency support. Contact your account manager for details.'
  }
];
---

<Layout 
  title="Contact Us - Executive AI Training" 
  description="Get in touch with Grey Matter LLC for AI training and consulting services. Multiple ways to connect with response times that meet your needs."
>
  <style>
    /* CSS variables for consistent sizing */
    :root {
      --header-height: 5.5rem;
    }
    
    /* Enable smooth scrolling - 2025 best practice */
    html {
      scroll-behavior: smooth;
      scroll-padding-top: var(--header-height);
    }
    
    /* Respect reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
      .hover-lift {
        transform: none !important;
      }
    }

    /* Form field focus styles for better accessibility */
    .form-field:focus {
      outline: 2px solid transparent;
      outline-offset: 2px;
    }

    /* Multi-channel card hover effect */
    .contact-card {
      transition: all 0.3s ease;
      overflow: hidden; /* Prevent content overflow */
      word-wrap: break-word; /* Handle long text */
    }

    .contact-card:hover {
      transform: translateY(-4px);
    }

    /* Progress indicator for multi-step form */
    .form-progress {
      transition: width 0.3s ease;
    }

    /* Floating labels effect */
    .floating-label {
      transition: all 0.2s ease;
    }

    .has-value .floating-label,
    .form-field:focus ~ .floating-label {
      transform: translateY(-1.5rem) scale(0.85);
      color: var(--color-brand-gold);
    }


    /* Trust indicator styles */
    .trust-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.2);
      border-radius: 9999px;
      font-size: 0.875rem;
      color: rgb(16, 185, 129);
      white-space: nowrap; /* Prevent text wrapping */
    }

    .dark .trust-badge {
      background: rgba(16, 185, 129, 0.1);
      border-color: rgba(16, 185, 129, 0.3);
    }

    /* Status indicator */
    .status-dot {
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    /* Mobile-first touch targets (44x44 minimum) */
    button, a, input, select, textarea {
      min-height: 44px;
    }

    /* Response time badge */
    .response-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.75rem;
      background: rgba(251, 191, 36, 0.1);
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      color: rgb(217, 119, 6);
      white-space: nowrap; /* Prevent text wrapping */
    }

    .dark .response-badge {
      background: rgba(251, 191, 36, 0.15);
      color: rgb(251, 191, 36);
    }

    /* FAQ details styling */
    details {
      overflow: hidden; /* Prevent content overflow */
    }

    details summary {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      list-style: none; /* Remove default arrow */
    }

    details summary::-webkit-details-marker {
      display: none; /* Remove default arrow in webkit browsers */
    }

    /* Office info card proper spacing */
    .office-info-card {
      word-break: break-word; /* Handle long addresses */
    }

    /* Section container improvements */
    .section-padding {
      padding-top: 4rem;
      padding-bottom: 4rem;
    }

    /* Ensure proper spacing on mobile */
    @media (max-width: 768px) {
      .container-narrow {
        padding-left: 1rem;
        padding-right: 1rem;
      }

      .contact-card {
        padding: 1.5rem; /* Consistent padding on mobile */
      }

      .section-padding {
        padding-top: 3rem;
        padding-bottom: 3rem;
      }
    }
  </style>

  <!-- Hero Section with Availability Status -->
  <section class="relative bg-gradient-to-br from-gray-50 via-white to-brand-pearl/30 dark:from-dark-surface dark:via-dark-base dark:to-dark-surface py-20 overflow-hidden">
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute top-0 right-0 w-96 h-96 bg-brand-gold/5 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 left-0 w-96 h-96 bg-brand-navy/5 rounded-full blur-3xl"></div>
    </div>
    
    <div class="container-narrow relative z-10">
      <AnimatedSection animate="fade">
        <div class="text-center max-w-3xl mx-auto">
          <!-- Live Status Indicator -->
          <div class="inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 rounded-full text-sm font-medium mb-6">
            <span class="status-dot"></span>
            <span>We're online and ready to help</span>
          </div>
          
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6">
            How Can We Help You Today?
          </h1>
          <p class="text-xl text-gray-600 dark:text-gray-400 mb-8">
            Choose your preferred way to connect. We're here to support your AI journey with response times that match your needs.
          </p>
          
          <!-- Trust Indicators -->
          <div class="flex flex-wrap justify-center gap-4 mb-8">
            <div class="trust-badge">
              <Icon name="lucide:shield-check" class="w-4 h-4" />
              <span>SSL Secured</span>
            </div>
            <div class="trust-badge">
              <Icon name="lucide:lock" class="w-4 h-4" />
              <span>GDPR Compliant</span>
            </div>
            <div class="trust-badge">
              <Icon name="lucide:award" class="w-4 h-4" />
              <span>Certified Experts</span>
            </div>
          </div>
        </div>
      </AnimatedSection>
    </div>
  </section>

  <!-- Multi-Channel Contact Options (2025 Best Practice) -->
  <section class="section-padding bg-white dark:bg-dark-base -mt-20 relative z-20">
    <div class="container-narrow">
      <AnimatedSection animate="slide">
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
          {contactChannels.map((channel) => (
            <a 
              href={channel.link}
              class="contact-card bg-white dark:bg-dark-surface-2 rounded-xl p-6 shadow-lg hover:shadow-2xl border border-gray-100 dark:border-dark-border group cursor-pointer"
            >
              <div class="flex items-start justify-between mb-4">
                <div class={`w-12 h-12 rounded-lg flex items-center justify-center ${
                  channel.id === 'schedule-call' ? 'bg-blue-100 dark:bg-blue-900/20' :
                  channel.id === 'email-us' ? 'bg-purple-100 dark:bg-purple-900/20' :
                  'bg-orange-100 dark:bg-orange-900/20'
                }`}>
                  <Icon name={channel.icon} class={`w-6 h-6 ${
                    channel.id === 'schedule-call' ? 'text-blue-600 dark:text-blue-400' :
                    channel.id === 'email-us' ? 'text-purple-600 dark:text-purple-400' :
                    'text-orange-600 dark:text-orange-400'
                  }`} />
                </div>
                <span class="response-badge">
                  <Icon name="lucide:clock" class="w-3 h-3" />
                  {channel.responseTime}
                </span>
              </div>
              
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 group-hover:text-brand-gold dark:group-hover:text-accent-gold transition-colors">
                {channel.title}
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                {channel.description}
              </p>
              
              <div class="flex items-center justify-between">
                <span class="text-sm font-medium text-brand-gold dark:text-accent-gold">
                  {channel.action}
                </span>
                <Icon name="lucide:arrow-right" class="w-4 h-4 text-gray-400 group-hover:text-brand-gold dark:group-hover:text-accent-gold group-hover:translate-x-1 transition-all" />
              </div>
            </a>
          ))}
        </div>
      </AnimatedSection>

      <!-- Main Contact Form with Progressive Enhancement -->
      <div class="grid lg:grid-cols-5 gap-12">
        <!-- Left Column - Quick FAQ & Info -->
        <div class="lg:col-span-2">
          <AnimatedSection animate="fade">
            <div class="sticky top-24">
              <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
                Quick Answers
              </h2>
              
              <!-- Self-Service FAQ -->
              <div class="space-y-4 mb-8">
                {faqs.map((faq, index) => (
                  <details class="group" key={index}>
                    <summary class="flex items-center justify-between cursor-pointer p-4 bg-gray-50 dark:bg-dark-surface rounded-lg hover:bg-gray-100 dark:hover:bg-dark-surface-2 transition-colors">
                      <span class="font-medium text-gray-900 dark:text-white pr-4">
                        {faq.question}
                      </span>
                      <Icon name="lucide:chevron-down" class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform" />
                    </summary>
                    <div class="p-4 text-gray-600 dark:text-gray-400">
                      {faq.answer}
                    </div>
                  </details>
                ))}
              </div>

              <!-- Office Info -->
              <div class="bg-gradient-to-br from-brand-navy to-brand-navy-dark text-white rounded-xl p-6 office-info-card">
                <h3 class="font-semibold mb-4 flex items-center gap-2">
                  <Icon name="lucide:building-2" class="w-5 h-5" />
                  Office Location
                </h3>
                <p class="text-sm mb-2">
                  Grey Matter LLC<br />
                  123 Main Street, Suite 400<br />
                  Tulsa, Oklahoma 74103
                </p>
                <p class="text-xs opacity-80">
                  By appointment only
                </p>
              </div>
            </div>
          </AnimatedSection>
        </div>

        <!-- Right Column - Smart Contact Form -->
        <div class="lg:col-span-3">
          <AnimatedSection animate="slide" delay={0.2}>
            <div class="bg-white dark:bg-dark-surface-2 rounded-2xl shadow-xl border border-gray-100 dark:border-dark-border p-8">
              <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">
                  Send Us a Message
                </h2>
                <p class="text-gray-600 dark:text-gray-400">
                  Fill out the form below and we'll get back to you within 24 hours.
                </p>
              </div>

              <!-- Form Progress Indicator -->
              <div class="mb-6">
                <div class="h-2 bg-gray-200 dark:bg-dark-surface rounded-full overflow-hidden">
                  <div id="form-progress" class="form-progress h-full bg-brand-gold dark:bg-accent-gold rounded-full" style="width: 0%"></div>
                </div>
              </div>

              <form id="contact-form" class="space-y-6" novalidate>
                <!-- Name Fields -->
                <div class="grid sm:grid-cols-2 gap-4">
                  <div class="relative">
                    <input 
                      type="text" 
                      id="first-name" 
                      name="first-name" 
                      required
                      autocomplete="given-name"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="first-name" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      First Name *
                    </label>
                    <span class="error-message text-red-500 text-xs mt-1 hidden">Please enter your first name</span>
                  </div>
                  
                  <div class="relative">
                    <input 
                      type="text" 
                      id="last-name" 
                      name="last-name" 
                      required
                      autocomplete="family-name"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="last-name" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      Last Name *
                    </label>
                    <span class="error-message text-red-500 text-xs mt-1 hidden">Please enter your last name</span>
                  </div>
                </div>

                <!-- Email & Phone -->
                <div class="grid sm:grid-cols-2 gap-4">
                  <div class="relative">
                    <input 
                      type="email" 
                      id="email" 
                      name="email" 
                      required
                      autocomplete="email"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="email" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      Email Address *
                    </label>
                    <span class="error-message text-red-500 text-xs mt-1 hidden">Please enter a valid email</span>
                  </div>
                  
                  <div class="relative">
                    <input 
                      type="tel" 
                      id="phone" 
                      name="phone"
                      autocomplete="tel"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="phone" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      Phone Number
                    </label>
                  </div>
                </div>

                <!-- Company & Role -->
                <div class="grid sm:grid-cols-2 gap-4">
                  <div class="relative">
                    <input 
                      type="text" 
                      id="company" 
                      name="company"
                      autocomplete="organization"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="company" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      Company
                    </label>
                  </div>
                  
                  <div class="relative">
                    <input 
                      type="text" 
                      id="role" 
                      name="role"
                      autocomplete="organization-title"
                      class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all"
                      placeholder=" "
                    />
                    <label for="role" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                      Your Role
                    </label>
                  </div>
                </div>

                <!-- Interest Area -->
                <div class="relative">
                  <select 
                    id="interest" 
                    name="interest"
                    required
                    class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all appearance-none"
                  >
                    <option value="">Select your interest</option>
                    <option value="executive-training">Executive AI Training</option>
                    <option value="team-workshops">Team Workshops</option>
                    <option value="consulting">AI Strategy Consulting</option>
                    <option value="implementation">AI Implementation</option>
                    <option value="custom-solutions">Custom Solutions</option>
                    <option value="other">Other</option>
                  </select>
                  <label for="interest" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                    How can we help? *
                  </label>
                  <Icon name="lucide:chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" />
                  <span class="error-message text-red-500 text-xs mt-1 hidden">Please select an option</span>
                </div>

                <!-- Message -->
                <div class="relative">
                  <textarea 
                    id="message" 
                    name="message" 
                    rows="4"
                    required
                    class="form-field peer w-full px-4 py-3 pt-6 rounded-lg border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-900 dark:text-white focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold focus:border-transparent transition-all resize-none"
                    placeholder=" "
                  ></textarea>
                  <label for="message" class="floating-label absolute left-4 top-4 text-gray-500 dark:text-gray-400 pointer-events-none">
                    Tell us more about your needs *
                  </label>
                  <span class="error-message text-red-500 text-xs mt-1 hidden">Please enter a message</span>
                  <div class="text-xs text-gray-500 dark:text-gray-400 mt-1 text-right">
                    <span id="char-count">0</span> / 500 characters
                  </div>
                </div>

                <!-- Privacy Consent -->
                <div class="flex items-start gap-3">
                  <input 
                    type="checkbox" 
                    id="privacy-consent" 
                    name="privacy-consent"
                    required
                    class="mt-1 w-5 h-5 text-brand-gold dark:text-accent-gold border-gray-300 dark:border-dark-border rounded focus:ring-2 focus:ring-brand-gold dark:focus:ring-accent-gold"
                  />
                  <label for="privacy-consent" class="text-sm text-gray-600 dark:text-gray-400">
                    I agree to the <a href="/privacy" class="text-brand-gold dark:text-accent-gold hover:underline">Privacy Policy</a> and understand that Grey Matter LLC will use my information to respond to my inquiry. *
                  </label>
                </div>

                <!-- Form Actions -->
                <div class="flex flex-col sm:flex-row gap-4 items-center justify-between pt-4">
                  <button 
                    type="submit"
                    class="w-full sm:w-auto px-8 py-4 bg-brand-gold hover:bg-brand-gold-warm dark:bg-accent-gold dark:hover:bg-accent-gold-light text-brand-charcoal font-semibold rounded-lg transition-all transform hover:scale-105 hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                    disabled
                  >
                    <span class="flex items-center justify-center gap-2">
                      <Icon name="lucide:send" class="w-5 h-5" />
                      Send Message
                    </span>
                  </button>
                  
                  <p class="text-sm text-gray-500 dark:text-gray-400">
                    <Icon name="lucide:shield-check" class="inline w-4 h-4 mr-1" />
                    Your information is secure and encrypted
                  </p>
                </div>
              </form>

              <!-- Success Message (Hidden by default) -->
              <div id="success-message" class="hidden">
                <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 text-center">
                  <Icon name="lucide:check-circle" class="w-12 h-12 text-green-500 mx-auto mb-3" />
                  <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                    Message Sent Successfully!
                  </h3>
                  <p class="text-gray-600 dark:text-gray-400 mb-4">
                    Thank you for reaching out. We'll get back to you within 24 hours.
                  </p>
                  <button 
                    id="send-another"
                    class="text-brand-gold dark:text-accent-gold font-medium hover:underline"
                  >
                    Send another message
                  </button>
                </div>
              </div>
            </div>
          </AnimatedSection>
        </div>
      </div>
    </div>
  </section>


  <!-- Form Validation and Enhancement Script -->
  <script>
    // Form validation and progressive enhancement
    const form = document.getElementById('contact-form');
    const formProgress = document.getElementById('form-progress');
    const successMessage = document.getElementById('success-message');
    const submitButton = form.querySelector('button[type="submit"]');
    const charCount = document.getElementById('char-count');
    const messageField = document.getElementById('message');
    
    // Character counter
    messageField.addEventListener('input', (e) => {
      const count = e.target.value.length;
      charCount.textContent = count;
      if (count > 500) {
        charCount.classList.add('text-red-500');
      } else {
        charCount.classList.remove('text-red-500');
      }
    });
    
    // Floating label enhancement
    const formFields = form.querySelectorAll('.form-field');
    formFields.forEach(field => {
      // Check initial value
      if (field.value) {
        field.parentElement.classList.add('has-value');
      }
      
      // Monitor changes
      field.addEventListener('blur', () => {
        if (field.value) {
          field.parentElement.classList.add('has-value');
        } else {
          field.parentElement.classList.remove('has-value');
        }
      });
    });
    
    // Form progress tracking
    function updateProgress() {
      const fields = form.querySelectorAll('input[required], select[required], textarea[required]');
      const filledFields = Array.from(fields).filter(field => {
        if (field.type === 'checkbox') {
          return field.checked;
        }
        return field.value.trim() !== '';
      });
      
      const progress = (filledFields.length / fields.length) * 100;
      formProgress.style.width = `${progress}%`;
      
      // Enable submit button when form is complete
      if (progress === 100) {
        submitButton.disabled = false;
      } else {
        submitButton.disabled = true;
      }
    }
    
    // Monitor all form changes
    form.addEventListener('input', updateProgress);
    form.addEventListener('change', updateProgress);
    
    // Form validation
    function validateField(field) {
      const errorMessage = field.parentElement.querySelector('.error-message');
      if (!errorMessage) return true;
      
      let isValid = true;
      
      if (field.hasAttribute('required') && !field.value.trim()) {
        isValid = false;
      } else if (field.type === 'email' && field.value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        isValid = emailRegex.test(field.value);
      } else if (field.type === 'tel' && field.value) {
        const phoneRegex = /^[\d\s\-\+\(\)]+$/;
        isValid = phoneRegex.test(field.value);
      }
      
      if (!isValid) {
        field.classList.add('border-red-500');
        errorMessage.classList.remove('hidden');
      } else {
        field.classList.remove('border-red-500');
        errorMessage.classList.add('hidden');
      }
      
      return isValid;
    }
    
    // Validate on blur
    formFields.forEach(field => {
      field.addEventListener('blur', () => validateField(field));
    });
    
    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Validate all fields
      let isValid = true;
      const requiredFields = form.querySelectorAll('[required]');
      requiredFields.forEach(field => {
        if (!validateField(field)) {
          isValid = false;
        }
      });
      
      if (!isValid) {
        // Scroll to first error
        const firstError = form.querySelector('.border-red-500');
        if (firstError) {
          firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
          firstError.focus();
        }
        return;
      }
      
      // Show loading state
      submitButton.disabled = true;
      submitButton.innerHTML = `
        <span class="flex items-center justify-center gap-2">
          <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Sending...
        </span>
      `;
      
      // Simulate form submission (replace with actual API call)
      setTimeout(() => {
        // Hide form and show success message
        form.classList.add('hidden');
        successMessage.classList.remove('hidden');
        
        // Reset form
        form.reset();
        formProgress.style.width = '0%';
        formFields.forEach(field => {
          field.parentElement.classList.remove('has-value');
        });
        
        // Scroll to success message
        successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 2000);
    });
    
    // Send another message
    document.getElementById('send-another').addEventListener('click', () => {
      successMessage.classList.add('hidden');
      form.classList.remove('hidden');
      submitButton.disabled = false;
      submitButton.innerHTML = `
        <span class="flex items-center justify-center gap-2">
          <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5"><use href="#ai:lucide:send"></use></svg>
          Send Message
        </span>
      `;
    });
  </script>
</Layout>