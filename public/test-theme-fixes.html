<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Fixes Test</title>
    <style>
        /* Simulate Tailwind dark mode classes */
        .dark {
            background-color: #111418;
            color: #FAFAFA;
        }
        
        body {
            font-family: Inter, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #F9F9F9;
            color: #1D1D1F;
            transition: all 0.3s ease;
        }
        
        button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: linear-gradient(135deg, #0A2240, #B48628);
            color: white;
            font-weight: 600;
        }
        
        .test-panel {
            background: rgba(249, 249, 249, 0.7);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(10, 34, 64, 0.2);
            border-radius: 24px;
            padding: 24px;
            margin: 20px 0;
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.15);
        }
        
        .dark .test-panel {
            background: rgba(17, 20, 24, 0.8);
            border: 1px solid rgba(212, 160, 52, 0.3);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.4);
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(17, 20, 24, 0.1);
            border-radius: 24px;
            border: 1px solid rgba(10, 34, 64, 0.2);
            margin: 10px 0;
        }
        
        .dark .connection-status {
            background: rgba(212, 160, 52, 0.1);
            border: 1px solid rgba(212, 160, 52, 0.2);
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .connected { background-color: #10b981; animation: pulse 2s infinite; }
        .connecting { background-color: #f59e0b; animation: pulse 2s infinite; }
        .disconnected { background-color: #ef4444; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .input-test {
            width: 100%;
            padding: 12px 16px;
            background: rgba(249, 249, 249, 0.5);
            border: 1px solid rgba(10, 34, 64, 0.2);
            border-radius: 12px;
            margin: 10px 0;
        }
        
        .dark .input-test {
            background: rgba(26, 30, 36, 0.7);
            border: 1px solid rgba(212, 160, 52, 0.2);
            color: #FAFAFA;
        }
        
        .log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Voice Assistant Theme Fixes Test</h1>
    
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <button onclick="testConnectionStates()">Test Connection States</button>
    <button onclick="testGlassEffects()">Test Glass Effects</button>
    
    <div class="test-panel" id="mainPanel">
        <h3>ðŸŽ¤ Voice Assistant UI Test</h3>
        
        <div class="connection-status" id="connectionStatus">
            <div class="status-dot connected" id="statusDot"></div>
            <span id="statusText">Connected</span>
        </div>
        
        <input type="text" class="input-test" placeholder="Type a message or use voice..." id="testInput">
        
        <h4>Glass Effect Demo</h4>
        <p>Background should use proper theme colors with 4px blur effect.</p>
        
        <h4>Dark Theme Check</h4>
        <ul>
            <li>âœ… Dark surface: #111418 with transparency</li>
            <li>âœ… Dark gold borders: #D4A034 with 30% opacity</li>
            <li>âœ… Backdrop blur: 4px (backdrop-blur-sm)</li>
            <li>âœ… Connection state debugging enabled</li>
        </ul>
    </div>
    
    <div class="log" id="debugLog">
        <div>Theme Fixes Debug Console:</div>
        <div>- Testing dark mode detection</div>
        <div>- Testing glass effect styles</div>
        <div>- Testing connection state handling</div>
    </div>

    <script>
        let connectionState = 'connected';
        const states = ['connected', 'connecting', 'disconnected'];
        let currentStateIndex = 0;
        
        function log(message) {
            const debugLog = document.getElementById('debugLog');
            const timestamp = new Date().toISOString();
            debugLog.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            debugLog.scrollTop = debugLog.scrollHeight;
        }
        
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            log(`Dark mode ${isDark ? 'enabled' : 'disabled'}`);
            
            // Test theme detection logic from our component
            const detectedTheme = isDark ? 'dark' : 'light';
            log(`Theme detection: ${detectedTheme}`);
            
            // Test background colors
            const mainPanel = document.getElementById('mainPanel');
            if (isDark) {
                log('Applied dark theme colors: bg(rgba(17, 20, 24, 0.8)), border(rgba(212, 160, 52, 0.3))');
            } else {
                log('Applied light theme colors: bg(rgba(249, 249, 249, 0.7)), border(rgba(10, 34, 64, 0.2))');
            }
        }
        
        function testConnectionStates() {
            currentStateIndex = (currentStateIndex + 1) % states.length;
            connectionState = states[currentStateIndex];
            
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            const testInput = document.getElementById('testInput');
            
            // Remove all state classes
            statusDot.className = 'status-dot';
            statusDot.classList.add(connectionState);
            
            // Update status text and input placeholder
            switch(connectionState) {
                case 'connected':
                    statusText.textContent = 'Connected';
                    testInput.placeholder = 'Type a message or use voice...';
                    testInput.disabled = false;
                    break;
                case 'connecting':
                    statusText.textContent = 'Connecting...';
                    testInput.placeholder = 'Connecting...';
                    testInput.disabled = true;
                    break;
                case 'disconnected':
                    statusText.textContent = 'Disconnected';
                    testInput.placeholder = 'Disconnected';
                    testInput.disabled = true;
                    break;
            }
            
            log(`Connection state changed to: ${connectionState}`);
            log(`Input disabled: ${testInput.disabled}`);
            log(`Placeholder: ${testInput.placeholder}`);
            
            // Simulate the debug logging from our component
            log(`[WebRTC Connection Debug] { connectionState: '${connectionState}', isConnected: ${connectionState === 'connected'}, timestamp: '${new Date().toISOString()}' }`);
        }
        
        function testGlassEffects() {
            log('Testing glass effect properties:');
            log('- backdrop-filter: blur(4px) saturate(1.2)');
            log('- Background opacity with theme colors');
            log('- Border colors with proper transparency');
            
            const isDark = document.documentElement.classList.contains('dark');
            if (isDark) {
                log('Dark theme glass: rgba(17, 20, 24, 0.8) with rgba(212, 160, 52, 0.3) border');
            } else {
                log('Light theme glass: rgba(249, 249, 249, 0.7) with rgba(10, 34, 64, 0.2) border');
            }
        }
        
        // Initialize
        log('Theme fixes test initialized');
        log('All fixes implemented:');
        log('âœ… Dark theme color detection');
        log('âœ… Glass effect backdrop-blur-sm (4px)');
        log('âœ… Connection state debugging');
        log('âœ… Input placeholder improvements');
        log('âœ… Theme-consistent borders and backgrounds');
    </script>
</body>
</html>